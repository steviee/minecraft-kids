# Unbound configuration for MCK Suite local development
# This provides DNS resolution for *.mck.local domains

server:
    # Logging
    verbosity: 1
    log-queries: no

    # Network settings
    interface: 0.0.0.0
    port: 53
    do-ip4: yes
    do-ip6: no
    do-udp: yes
    do-tcp: yes

    # Access control
    access-control: 0.0.0.0/0 allow
    access-control: 172.16.0.0/12 allow  # Docker networks

    # Performance
    num-threads: 1
    msg-cache-slabs: 2
    rrset-cache-slabs: 2
    infra-cache-slabs: 2
    key-cache-slabs: 2

    # Security
    hide-identity: yes
    hide-version: yes
    harden-glue: yes
    harden-dnssec-stripped: yes

    # Local zone for development
    private-domain: "mck.local"
    domain-insecure: "mck.local"

    # Local data - Main services
    local-zone: "mck.local." static
    local-data: "mck.local. IN A 172.18.0.1"  # Docker bridge gateway
    local-data: "traefik.mck.local. IN A 172.18.0.1"
    local-data: "api.mck.local. IN A 172.18.0.1"

    # Minecraft server subzone
    local-zone: "mc.mck.local." static
    local-data: "mc.mck.local. IN A 172.18.0.1"
    local-data: "test.mc.mck.local. IN A 172.18.0.1"
    local-data: "survival.mc.mck.local. IN A 172.18.0.1"
    local-data: "creative.mc.mck.local. IN A 172.18.0.1"

    # Forward other queries to public DNS
    forward-zone:
        name: "."
        forward-addr: 1.1.1.1  # Cloudflare DNS
        forward-addr: 8.8.8.8  # Google DNS
